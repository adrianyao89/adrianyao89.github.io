<!DOCTYPE html>
<html>
<head>
<title>账户体系接口文档</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-size:15px;
  line-height:1.7;
  overflow-x:hidden;

    background-color: white;
    border-radius: 3px;
    border: 3px solid #EEE;
    box-shadow: inset 0 0 0 1px #CECECE;
    font-family: "微软雅黑", Helvetica, Console,  arial, freesans, clean, sans-serif;
    max-width: 60%;
    padding: 30px;
    margin: 10px auto 0px;
    min-width: 900px;
    color:#333333;
}

body>*:first-child {
  margin-top: 0 ;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/
body table
{
  display:block;
  overflow:auto;
  width:100%;
  border-collapse: collapse;
  border-spacing: 0;
  padding: 0;
}

body table th
{
  font-weight:700;
  min-width: 45px;
}

body table th,body table td
{
  border:1px solid #ddd;
  padding:6px 13px;
}

body table tr
{
  background-color:#fff;
  border-top:1px solid #ccc;
}

body table tr:nth-child(2n)
{
  background-color:#f8f8f8;
}

/*table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
  min-width: 150px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}*/

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}

/*
===========================================================================*/

.leftFirstNav {
  float: left;
  position: fixed;
  left: 0px;
  margin: 200px 0;
  border-radius: 0px ; 
  border-radius: 0px ;
  width: 300px;
  height: 90%;
  overflow: hidden;
  padding-bottom: 3px;
}

.leftFirstNav:hover {
  overflow: scroll;
}

.leftSecondNav {
  line-height: 1.2;
  width: 300px;
  border-bottom: 1px solid #428bca;
}

.leftSecondNav a {
  border-width: 0px;
  margin-top: 1px ;
  padding-left: 40px ;
  border-bottom: 1px solid #ddd ;
  border-right: 1px solid #ddd;
  border-radius: 0px ; 
  /*width: 100%;*/
  width: 244px;
}

.list-group-item {
  position: relative;
  display: block;
  padding: 10px 15px;
  /*margin-bottom: -1px;*/
  background-color: #fff;
  border: 1px solid #ddd;
  width: 268px;
  border-top: none;
}
a.list-group-item:hover {
  background-color: #eee;
}

.active {
  background-color: #428bca !important;
  color: white;
}

#searchField {
  display: block;
  width: 274px;
  height: 34px;
  padding: 6px 12px;
  font-size: 14px;
  line-height: 1.42857143;
  color: #555;
  background-color: #fff;
  background-image: none;
  border: 1px solid #ccc;
  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
  box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
}


</style>
</head>
<body>
<h1 id="-">账户体系接口文档</h1>
<h2 id="-">修改记录</h2>
<table>
<thead>
<tr>
<th>时间</th>
<th>更新内容</th>
<th>操作人</th>
</tr>
</thead>
<tbody>
<tr>
<td>2014-10-13</td>
<td>初始版本</td>
<td>赵国祥</td>
</tr>
<tr>
<td>2014-10-23</td>
<td>新增仅用手机号码即可进行沃币查询、支付、回滚的接口(2.5.11 2.5.12 2.5.13) 新增积分相关接口(2.7)</td>
<td>赵国祥</td>
</tr>
<tr>
<td>2014-11-20</td>
<td>2.0.1a版本一键注册及自动注册业务逻辑发生变化</td>
<td>赵国祥</td>
</tr>
</tbody>
</table>
<h2 id="1-">1 接口说明</h2>
<p>系统服务端与客户端采用标准HTTP/1.1协议，默认开启Keep-Alive，在高并发请求下必须在服务端响应消息头指定keep-alive :timeout=30,max=50，编码统一使用UTF-8格式</p>
<h3 id="1-1-">1.1 接口协议</h3>
<h4 id="1-1-1-http-header">1.1.1 请求HTTP Header</h4>
<p>请求的消息类型必须使用GET或POST方法。</p>
<p>请求参数根据需要可以放到HTTP Header、URL和消息体中。一般对于和终端、会话相关的参数放到HTTP Header中，其它和单次请求相关的参数则通过POST请求携带的消息体来传递。</p>
<p>目前在请求消息中传递的HTTP Header列表如下：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>元素</th>
<th>必须</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>标准头</td>
<td>Content-Type</td>
<td>是</td>
<td>application/json</td>
</tr>
<tr>
<td>标准头</td>
<td>Content-Length</td>
<td>是</td>
<td>消息体的长度，发送POST请求</td>
</tr>
<tr>
<td>标准头</td>
<td>Accept-Encoding</td>
<td>否</td>
<td>gzip,deflate</td>
</tr>
<tr>
<td>标准头</td>
<td>Connection</td>
<td>否</td>
<td>keep-alive</td>
</tr>
<tr>
<td>标准头</td>
<td>keep-alive</td>
<td>否</td>
<td>例：timeout=30,max=50 上面配置表示30秒后关闭连接，有效时间内最大支持50个请求</td>
</tr>
<tr>
<td>扩展头</td>
<td>msg_id</td>
<td>否</td>
<td>32位uuid</td>
</tr>
<tr>
<td>扩展头</td>
<td>req_time</td>
<td>否</td>
<td>请求时间，格式YYYYMMDDHHMMSSFFF</td>
</tr>
<tr>
<td>扩展头</td>
<td>client_id</td>
<td>是</td>
<td>客户端ID</td>
</tr>
<tr>
<td>扩展头</td>
<td>client_secret</td>
<td>是</td>
<td>客户端密钥</td>
</tr>
<tr>
<td>扩展头</td>
<td>client_chl_cd</td>
<td>否</td>
<td>客户端渠道号</td>
</tr>
<tr>
<td>扩展头</td>
<td>client_version</td>
<td>否</td>
<td>客户端版本号</td>
</tr>
<tr>
<td>扩展头</td>
<td>access_token</td>
<td>否</td>
<td>根据接口权限级别要求不同，来确定是否必须使用</td>
</tr>
<tr>
<td>扩展头</td>
<td>sdk_version</td>
<td>是</td>
<td>SDK版本号，如果该版本是version2.0走新的加密方式（MD5）</td>
</tr>
<tr>
<td>扩展头</td>
<td>phone_brands</td>
<td>否</td>
<td>手机品牌</td>
</tr>
<tr>
<td>扩展头</td>
<td>phone_model</td>
<td>否</td>
<td>手机型号</td>
</tr>
<tr>
<td>扩展头</td>
<td>resolution</td>
<td>否</td>
<td>分辨率</td>
</tr>
<tr>
<td>扩展头</td>
<td>os_version</td>
<td>否</td>
<td>操作系统版本号</td>
</tr>
</tbody>
</table>
<h4 id="1-1-2-http-">1.1.2 应答HTTP头</h4>
<p>在应答消息中传递的HTTP Header列表如下：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>元素</th>
<th>必须</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>标准头</td>
<td>Connection</td>
<td>是</td>
<td>keep-alive</td>
</tr>
<tr>
<td>标准头</td>
<td>keep-alive</td>
<td>否</td>
<td>例：timeout=30,max=50 上面配置表示30秒后关闭连接，有效时间内最大支持50个请求</td>
</tr>
<tr>
<td>标准头</td>
<td>Content-Encoding</td>
<td>否</td>
<td>gzip</td>
</tr>
<tr>
<td>扩展头</td>
<td>msg_id</td>
<td>否</td>
<td>32位uuid</td>
</tr>
<tr>
<td>扩展头</td>
<td>client_type</td>
<td>否</td>
<td>应用类型 10:自有应用,11:联运游戏</td>
</tr>
</tbody>
</table>
<h3 id="1-2-">1.2 服务器地址</h3>
<table>
<thead>
<tr>
<th>URL</th>
<th>环境</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://210.22.123.94:18081">http://210.22.123.94:18081</a></td>
<td>测试</td>
</tr>
<tr>
<td><a href="https://open.wostore.cn/">https://open.wostore.cn/</a></td>
<td>生产</td>
</tr>
</tbody>
</table>
<h3 id="1-3-">1.3 安全性</h3>
<h4 id="1-3-1-">1.3.1 用户安全认证</h4>
<p>安全：所有提供的API服务接口都使用https做安全传输。</p>
<p>防篡改：针对个别业务操作敏感的信息，例如沃币奖励与消费的信息。我们将传递内容做MD5数字签名，服务接口做防篡改检测。</p>
<h2 id="2-">2 接口协议定义</h2>
<h3 id="2-1-">2.1 鉴权</h3>
<h4 id="2-1-1-accesstoken">2.1.1 验证AccessToken</h4>
<ul>
<li><strong>接口描述</strong><br>  针对联网运营游戏三方验证的规范，CP Serve端做登陆验证的接口规范。Cp Server与账户server之间的验证。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/oauth2/auth/validate_oauth2_cp</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><strong>业务规则</strong><br>  无</li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;user_id&quot;:&quot;&quot;
}</code></pre>
<p>失败:</p>
<h3 id="2-2-">2.2 注册与登陆</h3>
<h4 id="2-2-1-">2.2.1 手动登陆</h4>
<ul>
<li><strong>接口描述</strong><br>  使用用户输入的手机号+密码进行登录。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/oauth2/auth/acct_password_login</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><p><strong>业务规则</strong><br>  B1、登录后，应用如果没有完成用户授权，则自动完成用户授权。</p>
<p>  B2、登陆中会增加一个判断，根据用户密码输入的次数，判断该时间端内是否可以登陆。目前是用户输错密码3次，24小时内改账户冻结；修改密码可直接解冻。</p>
<p>  B3、<a href="#3-3-">密码加密</a>，登录时传输的密码需要加密。<br>  B4、2.0.1a及其后续版本，支持用户名自定义。</p>
</li>
<li><p><strong>请求参数</strong></p>
</li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户帐号</td>
<td>String</td>
<td>user_acct</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>密码</td>
<td>String</td>
<td>password</td>
<td>是</td>
<td>加密</td>
</tr>
</tbody>
</table>
<pre><code>{
    acct_login: {
        &quot;user_acct&quot;: &quot;&quot;,
        &quot;password&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>授权码</td>
<td>String</td>
<td>code</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>无</td>
</tr>
<tr>
<td>刷新令牌</td>
<td>String</td>
<td>refresh_token</td>
<td>无</td>
</tr>
<tr>
<td>用户标识</td>
<td>String</td>
<td>user_id</td>
<td>无</td>
</tr>
<tr>
<td>用户类型</td>
<td>String</td>
<td>user_type</td>
<td>正式会员、准会员、临时会员（游客会员）</td>
</tr>
<tr>
<td>用户帐号</td>
<td>String</td>
<td>user_acct</td>
<td>user_type=10，手机号码的4到7位用*显示</td>
</tr>
<tr>
<td>用户昵称</td>
<td>String</td>
<td>nickname</td>
<td>无</td>
</tr>
<tr>
<td>用户沃币</td>
<td>String</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>用户头像</td>
<td>String</td>
<td>portrait_url</td>
<td>如果用户没有头像则返回结果不包括此字段</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;acct_login&quot;:{
    &quot;code&quot;:&quot;&quot;,
    &quot;access_token&quot;:&quot;&quot;,
    &quot;refresh_token&quot;:&quot;&quot;,
    &quot;user_id&quot;:&quot;&quot;,
    &quot;user_type&quot;:&quot;&quot;,
    &quot;user_acct&quot;:&quot;&quot;,
    &quot;nickname&quot;:&quot;&quot;,
    &quot;point&quot;:&quot;&quot;,
    &quot;portrait_url&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败:<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-2-2-">2.2.2 刷新令牌获取用户信息</h4>
<ul>
<li><strong>接口描述</strong><br>  应用在访问令牌无法请求时服务时，通过刷新令牌重新获取访问令牌和用户信息。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/oauth2/auth/refresh_token</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>   <a href="#3-2-">应用鉴权</a></li>
<li><strong>业务规则</strong><br>  无</li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>refresh_token</td>
<td>String</td>
<td>refresh_token</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    refresh_token: {
        &quot;refresh_token&quot;: &quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>无</td>
</tr>
<tr>
<td>刷新令牌</td>
<td>String</td>
<td>refresh_token</td>
<td>无</td>
</tr>
<tr>
<td>用户标识</td>
<td>String</td>
<td>user_id</td>
<td>无</td>
</tr>
<tr>
<td>用户类型</td>
<td>String</td>
<td>user_type</td>
<td>正式会员、准会员、临时会员（游客会员）</td>
</tr>
<tr>
<td>用户帐号</td>
<td>String</td>
<td>user_acct</td>
<td>user_type=10，手机号码的4到7位用*显示</td>
</tr>
<tr>
<td>用户昵称</td>
<td>String</td>
<td>nickname</td>
<td>无</td>
</tr>
<tr>
<td>用户沃币</td>
<td>String</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>用户头像</td>
<td>String</td>
<td>portrait_url</td>
<td>如果用户没有头像则返回结果不包括此字段</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;refresh_token&quot;:{
    &quot;access_token&quot;:&quot;&quot;,
    &quot;refresh_token&quot;:&quot;&quot;,
    &quot;user_id&quot;:&quot;&quot;,
    &quot;user_type&quot;:&quot;&quot;,
    &quot;user_acct&quot;:&quot;&quot;,
    &quot;nickname&quot;:&quot;&quot;,
        &quot;point&quot;:&quot;&quot;,
        &quot;portrait_url&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败:<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-2-3-">2.2.3 手机验证码登录</h4>
<ul>
<li><strong>接口描述</strong><br>  使用用户输入的手机号+获取的验证码进行登录。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/uac/user/sms_code_login</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><strong>业务规则</strong><br>  B1、登录后，应用如果没有完成用户授权，则自动完成用户授权。<br>  B2、登陆中会增加一个判断，根据用户密码输入的次数，判断该时间端内是否可以登陆。目前是用户输错密码3次，24小时内改账户冻结；</li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>手机号码</td>
<td>String</td>
<td>mobile_phone</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>验证码</td>
<td>String</td>
<td>sms_code</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;sms_code_login&quot;:{
        &quot;mobile_phone&quot;:&quot;&quot;,
        &quot;sms_code&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>授权码</td>
<td>String</td>
<td>code</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>无</td>
</tr>
<tr>
<td>刷新令牌</td>
<td>String</td>
<td>refresh_token</td>
<td>无</td>
</tr>
<tr>
<td>用户标识</td>
<td>String</td>
<td>user_id</td>
<td>无</td>
</tr>
<tr>
<td>用户类型</td>
<td>String</td>
<td>user_type</td>
<td>正式会员、准会员、临时会员（游客会员）</td>
</tr>
<tr>
<td>用户帐号</td>
<td>String</td>
<td>user_acct</td>
<td>user_type=10，手机号码的4到7位用*显示</td>
</tr>
<tr>
<td>用户昵称</td>
<td>String</td>
<td>nickname</td>
<td>无</td>
</tr>
<tr>
<td>用户沃币</td>
<td>String</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>用户头像</td>
<td>String</td>
<td>portrait_url</td>
<td>如果用户没有头像则返回结果不包括此字段</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;sms_code_login&quot;:{
        &quot;code&quot;:&quot;&quot;,
        &quot;access_token&quot;:&quot;&quot;,
        &quot;refresh_token&quot;:&quot;&quot;,
        &quot;user_id&quot;:&quot;&quot;,
        &quot;user_type&quot;:&quot;&quot;,
        &quot;user_acct&quot;:&quot;&quot;,
        &quot;nickname&quot;:&quot;&quot;,
        &quot;point&quot;:&quot;&quot;,
        &quot;portrait_url&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败:<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-2-4-">2.2.4 创建手机注册用户</h4>
<ul>
<li><strong>接口描述</strong><br>  2.0.1a版本之前：绑定手机号注册一个正式会员账号，需先调用获取短信验证码验证手机号有效性。<br>  2.0.1a及其之后版本，允许自定义用户名。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/user/uac/user/reg_user_encrypt</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="">鉴权要求</a></li>
<li><strong>业务规则</strong><br>  B1、服务器端从DM库获取手机号码对应的IMSI。<br>  B2、<a href="#3-3-">密码加密</a>，密码传输过程中需要进行加密。<br>  B3、使用当前客户端注册，默认自动完成用户授权。<br>  B4、2.0.1a及其之后版本，允许自定义用户名，且验证码不是必须的。</li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>手机号码</td>
<td>String</td>
<td>mobile_phone</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>验证码</td>
<td>String</td>
<td>sms_code</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>密码</td>
<td>String</td>
<td>password</td>
<td>是</td>
<td>加密</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;reg_user&quot;:{
        &quot;mobile_phone&quot;:&quot;&quot;,
        &quot;sms_code&quot;:&quot;&quot;,
        &quot;password&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>授权码</td>
<td>String</td>
<td>code</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>无</td>
</tr>
<tr>
<td>刷新令牌</td>
<td>String</td>
<td>refresh_token</td>
<td>无</td>
</tr>
<tr>
<td>用户标识</td>
<td>String</td>
<td>user_id</td>
<td>无</td>
</tr>
<tr>
<td>用户类型</td>
<td>String</td>
<td>user_type</td>
<td>正式会员、准会员、临时会员（游客会员）</td>
</tr>
<tr>
<td>用户帐号</td>
<td>String</td>
<td>user_acct</td>
<td>user_type=10，手机号码的4到7位用*显示</td>
</tr>
<tr>
<td>用户昵称</td>
<td>String</td>
<td>nickname</td>
<td>无</td>
</tr>
<tr>
<td>用户沃币</td>
<td>String</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>用户头像</td>
<td>String</td>
<td>portrait_url</td>
<td>如果用户没有头像则返回结果不包括此字段</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;sms_code_login&quot;:{
        &quot;code&quot;:&quot;&quot;,
        &quot;access_token&quot;:&quot;&quot;,
        &quot;refresh_token&quot;:&quot;&quot;,
        &quot;user_id&quot;:&quot;&quot;,
        &quot;user_type&quot;:&quot;&quot;,
        &quot;user_acct&quot;:&quot;&quot;,
        &quot;nickname&quot;:&quot;&quot;,
        &quot;point&quot;:&quot;&quot;,
        &quot;portrait_url&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败:<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-2-5-">2.2.5 授权码获取用户信息</h4>
<ul>
<li><strong>接口描述</strong><br>  绑定手机号注册一个正式会员账号，需先调用获取短信验证码验证手机号有效性。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/user/uac/user/get_token</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="">鉴权要求</a></li>
<li><strong>业务规则</strong><br>  B1、biz_event=1，先验证是否用户授权，授权才能成功获取令牌。<br>  B2、biz_event=2，如果用户未授权，则先做用户授权再获取令牌。</li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>授权码</td>
<td>String</td>
<td>code</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>业务事件</td>
<td>int</td>
<td>biz_event</td>
<td>是</td>
<td>1:获取令牌，2、用户授权并获取令牌</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;get_token&quot;:{
        &quot;code&quot;:&quot;&quot;,
        &quot;biz_event&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>无</td>
</tr>
<tr>
<td>刷新令牌</td>
<td>String</td>
<td>refresh_token</td>
<td>无</td>
</tr>
<tr>
<td>用户标识</td>
<td>String</td>
<td>user_id</td>
<td>无</td>
</tr>
<tr>
<td>用户类型</td>
<td>String</td>
<td>user_type</td>
<td>正式会员、准会员、临时会员（游客会员）</td>
</tr>
<tr>
<td>用户帐号</td>
<td>String</td>
<td>user_acct</td>
<td>user_type=10，手机号码的4到7位用*显示</td>
</tr>
<tr>
<td>用户昵称</td>
<td>String</td>
<td>nickname</td>
<td>无</td>
</tr>
<tr>
<td>用户沃币</td>
<td>String</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>用户头像</td>
<td>String</td>
<td>portrait_url</td>
<td>如果用户没有头像则返回结果不包括此字段</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;get_token&quot;:{
        &quot;access_token&quot;:&quot;&quot;,
        &quot;refresh_token&quot;:&quot;&quot;,
        &quot;user_id&quot;:&quot;&quot;,
        &quot;user_type&quot;:&quot;&quot;,
        &quot;user_acct&quot;:&quot;&quot;,
        &quot;nickname&quot;:&quot;&quot;,
        &quot;point&quot;:&quot;&quot;,
        &quot;portrait_url&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败:<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-2-6-">2.2.6 一键登录注册（过时的）</h4>
<ul>
<li><strong>接口描述</strong><br>  使用IMSI号注册登录,或者手机号码+IMSI注册登录，仅供2.0.0及之前版本使用。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/user/uac/user/get_self_token</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="">鉴权要求</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>移动用户识别码</td>
<td>String</td>
<td>imsi</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>手机号码</td>
<td>String</td>
<td>mobile_phone</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;get_token&quot;:{
        &quot;imsi&quot;:&quot;&quot;,
        &quot;mobile_phone&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>授权码</td>
<td>String</td>
<td>code</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>无</td>
</tr>
<tr>
<td>刷新令牌</td>
<td>String</td>
<td>refresh_token</td>
<td>无</td>
</tr>
<tr>
<td>用户标识</td>
<td>String</td>
<td>user_id</td>
<td>无</td>
</tr>
<tr>
<td>用户类型</td>
<td>String</td>
<td>user_type</td>
<td>正式会员、准会员、临时会员（游客会员）</td>
</tr>
<tr>
<td>用户帐号</td>
<td>String</td>
<td>user_acct</td>
<td>user_type=10，手机号码的4到7位用*显示</td>
</tr>
<tr>
<td>用户昵称</td>
<td>String</td>
<td>nickname</td>
<td>无</td>
</tr>
<tr>
<td>用户沃币</td>
<td>String</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>用户头像</td>
<td>String</td>
<td>portrait_url</td>
<td>如果用户没有头像则返回结果不包括此字段</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;get_token&quot;:{
        &quot;code&quot;:&quot;&quot;,
        &quot;access_token&quot;:&quot;&quot;,
        &quot;refresh_token&quot;:&quot;&quot;,
        &quot;user_id&quot;:&quot;&quot;,
        &quot;user_type&quot;:&quot;&quot;,
        &quot;user_acct&quot;:&quot;&quot;,
        &quot;nickname&quot;:&quot;&quot;,
        &quot;point&quot;:&quot;&quot;,
        &quot;portrait_url&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败:<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-2-7-imsi">2.2.7 检查IMSI</h4>
<ul>
<li><strong>接口描述</strong><br>  检查IMSI对应的手机号码是否可获取，如果可获取则返回。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/user/uac/user/check_imsi</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="">鉴权要求</a></li>
<li><strong>业务规则</strong><br>  <a href="">手机号码加密</a>，查询到的手机号码返回时加密。</li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>移动用户识别码</td>
<td>String</td>
<td>imsi</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;check_imsi&quot;:{
        &quot;imsi&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<pre><code>{
    &quot;check_imsi&quot;:{
        &quot;mobile_phone&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-2-8-">2.2.8 一键登录注册</h4>
<ul>
<li><strong>接口描述</strong><br>  使用IMSI号注册登录，供2.0.1及之后版本使用。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/user/uac/user/one_key_reg</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="">鉴权要求</a></li>
<li><strong>业务规则</strong><ol>
<li>2.0.1a版本之前，如果传入的IMSI对应的手机号码无法在DM库中获取，那么注册失败。</li>
<li>2.0.1a及其之后版本中，即使IMSI为空，以及IMSI对应的手机号码无法在DM库中获取，也可以注册。</li>
</ol>
</li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>移动用户识别码</td>
<td>String</td>
<td>imsi</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>手机号码</td>
<td>String</td>
<td>mobile_phone</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;one_key_reg&quot;:{
        &quot;imsi&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>授权码</td>
<td>String</td>
<td>code</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>无</td>
</tr>
<tr>
<td>刷新令牌</td>
<td>String</td>
<td>refresh_token</td>
<td>无</td>
</tr>
<tr>
<td>用户标识</td>
<td>String</td>
<td>user_id</td>
<td>无</td>
</tr>
<tr>
<td>用户类型</td>
<td>String</td>
<td>user_type</td>
<td>正式会员、准会员、临时会员（游客会员）</td>
</tr>
<tr>
<td>用户帐号</td>
<td>String</td>
<td>user_acct</td>
<td>user_type=10，手机号码的4到7位用*显示</td>
</tr>
<tr>
<td>用户昵称</td>
<td>String</td>
<td>nickname</td>
<td>无</td>
</tr>
<tr>
<td>用户沃币</td>
<td>String</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>用户头像</td>
<td>String</td>
<td>portrait_url</td>
<td>如果用户没有头像则返回结果不包括此字段</td>
</tr>
<tr>
<td>用户行为</td>
<td>String</td>
<td>flag</td>
<td>表明此次行为是登录还是注册(one_key_register/one_key_login)</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;one_key_reg&quot;:{
        &quot;code&quot;:&quot;&quot;,
        &quot;access_token&quot;:&quot;&quot;,
        &quot;refresh_token&quot;:&quot;&quot;,
        &quot;user_id&quot;:&quot;&quot;,
        &quot;user_type&quot;:&quot;&quot;,
        &quot;user_acct&quot;:&quot;&quot;,
        &quot;nickname&quot;:&quot;&quot;,
        &quot;point&quot;:&quot;&quot;,
        &quot;portrait_url&quot;:&quot;&quot;,
        &quot;flag&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败:<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-2-9-">2.2.9 一键登录</h4>
<ul>
<li><strong>接口描述</strong><br>  使用user_id或者imsi进行登录</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/uac/user/one_key_login</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><p><strong>业务规则</strong><br>  B1、在refresh token失败后，尝试一键登录</p>
</li>
<li><p><strong>请求参数</strong></p>
</li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>否</td>
<td>用户ID， user_id,imsi不能同时为空</td>
</tr>
<tr>
<td>手机imsi</td>
<td>String</td>
<td>imsi</td>
<td>否</td>
<td>手机imsi， user_id,imsi不能同时为空</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;one_key_login&quot;: {
        &quot;user_id&quot;: &quot;&quot;,
        &quot;imsi&quot;: &quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>授权码</td>
<td>String</td>
<td>code</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>无</td>
</tr>
<tr>
<td>刷新令牌</td>
<td>String</td>
<td>refresh_token</td>
<td>无</td>
</tr>
<tr>
<td>用户标识</td>
<td>String</td>
<td>user_id</td>
<td>无</td>
</tr>
<tr>
<td>用户类型</td>
<td>String</td>
<td>user_type</td>
<td>正式会员、准会员、临时会员（游客会员）</td>
</tr>
<tr>
<td>用户帐号</td>
<td>String</td>
<td>user_acct</td>
<td>user_type=10，手机号码的4到7位用*显示</td>
</tr>
<tr>
<td>用户昵称</td>
<td>String</td>
<td>nickname</td>
<td>无</td>
</tr>
<tr>
<td>用户沃币</td>
<td>String</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>用户头像</td>
<td>String</td>
<td>portrait_url</td>
<td>如果用户没有头像则返回结果不包括此字段</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;one_key_login&quot;:{
        &quot;code&quot;:&quot;&quot;,
        &quot;access_token&quot;:&quot;&quot;,
        &quot;refresh_token&quot;:&quot;&quot;,
        &quot;user_id&quot;:&quot;&quot;,
        &quot;user_type&quot;:&quot;&quot;,
        &quot;user_acct&quot;:&quot;&quot;,
        &quot;nickname&quot;:&quot;&quot;,
        &quot;point&quot;:&quot;&quot;,
        &quot;portrait_url&quot;:&quot;&quot;,
    }
}</code></pre>
<p>失败:<br><a href="#3-1-">错误编码</a></p>
<h3 id="2-3-">2.3 重置密码</h3>
<h4 id="2-3-1-">2.3.1 修改密码</h4>
<ul>
<li><strong>接口描述</strong><br>  修改用户登陆密码。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/user/uac/user/change_password_encrypt</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">一级鉴权</a></li>
<li><strong>业务规则</strong><br>  1、成功修改密码后清除用户密码输错导致的冻结状态。<br>  2、<a href="#3-3-">密码加密</a></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>旧密码</td>
<td>String</td>
<td>old_password</td>
<td>是</td>
<td>加密</td>
</tr>
<tr>
<td>新密码</td>
<td>String</td>
<td>new_password</td>
<td>是</td>
<td>加密</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;change_password&quot;:{
        &quot;user_id&quot;:&quot;&quot;,
        &quot;old_password&quot;:&quot;&quot;,
        &quot;new_password&quot;:&quot;&quot;
  }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<pre><code>{
    &quot;change_password&quot;:{}
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-3-2-">2.3.2 获取短信验证码</h4>
<ul>
<li><strong>接口描述</strong><br>  获取短信验证码，短信验证码公共接口，为防止非法请求规定每个手机号每次获取间隔时间必须60秒以上。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/user/uac/user/get_sms_code</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="">鉴权要求</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>否</td>
<td>biz_event=2,必填</td>
</tr>
<tr>
<td>手机号码</td>
<td>String</td>
<td>mobile_phone</td>
<td>否</td>
<td>biz_event=1/3/4/5/6/7,必填</td>
</tr>
<tr>
<td>事件类型</td>
<td>String</td>
<td>biz_event</td>
<td>是</td>
<td>1:忘记密码流程，2:手机号变更身份验证，3:手机注册流程，4:手机号变更新手机验证，5:绑定手机流程，6:验证码登录流程，7：其他(该手机号码必须以注册)</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;get_sms_code&quot;:{
        &quot;mobile_phone&quot;:&quot;&quot;,
        &quot;user_id&quot;:&quot;&quot;,
        &quot;biz_event&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<pre><code>{
    &quot;get_sms_code&quot;:{}
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-3-3-">2.3.3 设置登录密码</h4>
<ul>
<li><strong>接口描述</strong><br>  设置新的密码，可用于忘记密码。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/user/uac/user/set_password_encrypt</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="">鉴权要求</a></li>
<li><strong>业务规则</strong><br>  需要先获取验证码</li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>否</td>
<td>user_id/mobile_phone两个必填一个</td>
</tr>
<tr>
<td>手机号码</td>
<td>String</td>
<td>mobile_phone</td>
<td>否</td>
<td>user_id/mobile_phone两个必填一个</td>
</tr>
<tr>
<td>验证码</td>
<td>String</td>
<td>verify_code</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>新密码</td>
<td>String</td>
<td>password</td>
<td>是</td>
<td>加密</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;set_password&quot;:{
        &quot;user_id&quot;:&quot;&quot;,
        &quot;mobile_phone&quot;:&quot;&quot;,
        &quot;verify_code&quot;:&quot;&quot;,
        &quot;password&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<pre><code>{
    &quot;set_password&quot;:{}
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h3 id="2-4-">2.4 用户信息</h3>
<h4 id="2-4-1-">2.4.1 获取用户信息</h4>
<ul>
<li><strong>接口描述</strong></li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/user/uac/user/get_user_info</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">三级鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;get_user_info&quot;:{
        &quot;user_id&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户标识</td>
<td>String</td>
<td>user_id</td>
<td>无</td>
</tr>
<tr>
<td>用户类型</td>
<td>String</td>
<td>user_type</td>
<td>正式会员、准会员、临时会员（游客会员）</td>
</tr>
<tr>
<td>用户帐号</td>
<td>String</td>
<td>user_acct</td>
<td>user_type=10，手机号码的4到7位用*显示</td>
</tr>
<tr>
<td>用户昵称</td>
<td>String</td>
<td>nickname</td>
<td>无</td>
</tr>
<tr>
<td>用户沃币</td>
<td>String</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>用户头像</td>
<td>String</td>
<td>portrait_url</td>
<td>如果用户没有头像则返回结果不包括此字段</td>
</tr>
<tr>
<td>性别</td>
<td>String</td>
<td>gender</td>
<td>10:男,11:女,12:保密</td>
</tr>
<tr>
<td>生日</td>
<td>String</td>
<td>birthday</td>
<td>格式YYYY-MM-DD</td>
</tr>
<tr>
<td>心情</td>
<td>String</td>
<td>mood</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;one_key_reg&quot;:{
        &quot;code&quot;:&quot;&quot;,
        &quot;access_token&quot;:&quot;&quot;,
        &quot;refresh_token&quot;:&quot;&quot;,
        &quot;user_id&quot;:&quot;&quot;,
        &quot;user_type&quot;:&quot;&quot;,
        &quot;user_acct&quot;:&quot;&quot;,
        &quot;nickname&quot;:&quot;&quot;,
        &quot;point&quot;:&quot;&quot;,
        &quot;portrait_url&quot;:&quot;&quot;,
        &quot;gender&quot;:&quot;&quot;,
        &quot;birthday&quot;:&quot;&quot;,
        &quot;mood&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-4-2-">2.4.2 修改用户信息</h4>
<ul>
<li><strong>接口描述</strong></li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/user/uac/user/change_user_info</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">三级鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>用户昵称</td>
<td>String</td>
<td>nickname</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>用户姓名</td>
<td>String</td>
<td>name</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>性别</td>
<td>String</td>
<td>gender</td>
<td>否</td>
<td>10:男,11:女,12:保密</td>
</tr>
<tr>
<td>生日</td>
<td>String</td>
<td>birthday</td>
<td>否</td>
<td>格式YYYY-MM-DD</td>
</tr>
<tr>
<td>心情</td>
<td>String</td>
<td>mood</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;change_user_info&quot;:{
        &quot;user_id&quot;:&quot;&quot;,
        &quot;nickname&quot;:&quot;&quot;,
        &quot;name&quot;:&quot;&quot;,
        &quot;gender&quot;:&quot;&quot;,
        &quot;birthday&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<pre><code>{
    &quot;change_user_info&quot;:{}
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-4-3-">2.4.3 上传用户头像</h4>
<ul>
<li><strong>接口描述</strong></li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/user/uac/user/upload_portrait_servlet?user_id=</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">三级鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>图片文件</td>
<td>String</td>
<td>file_data</td>
<td>是</td>
<td>二进制</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户头像</td>
<td>String</td>
<td>portrait_url</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;upload_portrait_servlet&quot;:{
        &quot;portrait_url&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-4-5-">2.4.5 获取用户订购业务</h4>
<ul>
<li><strong>接口描述</strong><br>  获取用户订购的业务，或者判断用户是否订购了某业务。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/ordersys/uac/user/get_user_order_biz</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">三级鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>业务编码</td>
<td>String</td>
<td>biz_cd</td>
<td>否</td>
<td>为空时查询订购业务，不为空时判断该用户是否订购了此业务。</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;get_user_order_biz&quot;:{
        &quot; userid&quot;:&quot;&quot;,
        &quot; biz_cd&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>订购业务列表</td>
<td>String</td>
<td>order_bizs</td>
<td>无</td>
</tr>
<tr>
<td>业务编码</td>
<td>String</td>
<td>biz_cd</td>
<td>无</td>
</tr>
<tr>
<td>订购时间</td>
<td>String</td>
<td>effect_date</td>
<td>格式yyyy-MM-dd HH:mm:ss</td>
</tr>
<tr>
<td>退订时间</td>
<td>String</td>
<td>cancel_date</td>
<td>格式yyyy-MM-dd HH:mm:ss</td>
</tr>
<tr>
<td>失效时间</td>
<td>String</td>
<td>expired_date</td>
<td>格式yyyy-MM-dd HH:mm:ss</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;get_user_order_biz&quot;:{
        &quot;order_bizs&quot;:[
            {
                &quot;biz_cd&quot;:&quot;&quot;,
                &quot;effect_date&quot;:&quot;&quot;,
                &quot;cancel_date&quot;:&quot;&quot;,
                &quot;expired_date &quot;:&quot;&quot;
            },
            {
                &quot;biz_cd&quot;:&quot;&quot;,
                &quot;effect_date&quot;:&quot;&quot;
                &quot;cancel_date&quot;:&quot;&quot;,
                &quot;expired_date &quot;:&quot;&quot;
            }
        ]，
        &quot;paging_param&quot;:{
            &quot;page_size&quot;:&quot;&quot;,
            &quot;current_page&quot;:&quot;&quot;,
            &quot;record_total&quot;:&quot;&quot;
        }
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-4-6-">2.4.6 绑定手机号码</h4>
<ul>
<li><strong>接口描述</strong><br>  绑定手机号码</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/uac/user/bound_phone_only</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><p><strong>业务规则</strong><br>  B1、这里只绑定手机号</p>
</li>
<li><p><strong>请求参数</strong></p>
</li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>用户ID</td>
</tr>
<tr>
<td>手机号码</td>
<td>String</td>
<td>mobile_phone</td>
<td>是</td>
<td>手机号码</td>
</tr>
<tr>
<td>短信验证码</td>
<td>String</td>
<td>sms_code</td>
<td>是</td>
<td>短信验证码</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;bound_phone_only&quot;: {
        &quot;user_id&quot;: &quot;&quot;,
        &quot;mobile_phone&quot;: &quot;&quot;,
        &quot;sms_code&quot;: &quot;&quot;,
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
</tr>
</tbody>
</table>
<pre><code>{
  &quot;bound_phone_only&quot;:{
  }
}</code></pre>
<p>失败:<br><a href="#3-1-">错误编码</a></p>
<h3 id="2-5-">2.5 沃币</h3>
<h4 id="2-5-1-">2.5.1 查询沃币余额</h4>
<ul>
<li><strong>接口描述</strong></li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/qry/query_point</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">三级鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_point&quot;:{
        &quot;user_id&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>沃币余额</td>
<td>Int</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>年底即将到期沃币</td>
<td>Int</td>
<td>pnt_end_of_year</td>
<td>无</td>
</tr>
<tr>
<td>当月产生沃币</td>
<td>Int</td>
<td>cur_month_pnt</td>
<td>无</td>
</tr>
<tr>
<td>累计产生总沃币</td>
<td>Int</td>
<td>point_value</td>
<td>有效期内累计产生总沃币</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_point&quot;:{
        &quot;point&quot;:&quot;&quot;,
        &quot;pnt_end_of_year&quot;:&quot;&quot;,
        &quot;cur_month_pnt&quot;:&quot;&quot;,
        &quot;point_value&quot;:&quot;&quot;
  }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-2-">2.5.2 查询沃币累计明细</h4>
<ul>
<li><strong>接口描述</strong></li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/qry/query_point_detail</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">三级鉴权</a></li>
<li><strong>业务规则</strong><br>  B1、如果接口传参没带分页参数，服务默认响应按每页10条，查询第1页处理。</li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>查询月份</td>
<td>Int</td>
<td>month_id</td>
<td>否</td>
<td>格式：YYYYMM</td>
</tr>
<tr>
<td>查询开始日期</td>
<td>Date</td>
<td>qry_start_date</td>
<td>否</td>
<td>格式：YYYY-MM-DD</td>
</tr>
<tr>
<td>查询结束日期</td>
<td>Date</td>
<td>qry_end_date</td>
<td>否</td>
<td>格式：YYYY-MM-DD</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_point_detail&quot;:{
        &quot;user_id&quot;:&quot;&quot;,
        &quot;month_id&quot;:&quot;&quot;,
        &quot;qry_start_date&quot;:&quot;&quot;,
        &quot;qry_end_date&quot;:&quot;&quot;,
        &quot;paging_param&quot;:{
            &quot;page_size&quot;:&quot;&quot;,
            &quot;current_page&quot;:&quot;&quot;,
            &quot;record_total&quot;:&quot;&quot;
        }
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>沃币值</td>
<td>Int</td>
<td>point_value</td>
<td>无</td>
</tr>
<tr>
<td>沃币类型</td>
<td>String</td>
<td>point_type</td>
<td>无</td>
</tr>
<tr>
<td>沃币类型名称</td>
<td>String</td>
<td>point_type_name</td>
<td>无</td>
</tr>
<tr>
<td>生效日期</td>
<td>String</td>
<td>effect_date</td>
<td>格式：YYYY-MM-DD HH:mm:ss</td>
</tr>
<tr>
<td>失效日期</td>
<td>String</td>
<td>expire_date</td>
<td>格式：YYYY-MM-DD HH:mm:ss</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_point_detail&quot;:{
        &quot;result_list&quot;:[
            {
                &quot;point_value&quot;:&quot;&quot;,
                &quot;point_type&quot;:&quot;&quot;,
                &quot;point_type_name&quot;:&quot;&quot;,
                &quot;effect_date&quot;:&quot;&quot;,
                &quot;expire_date&quot;:&quot;&quot;
            }
        ],
        &quot;paging_param&quot;:{
            &quot;record_total&quot;:&quot;&quot;
        }
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-3-">2.5.3 查询沃币消费明细</h4>
<ul>
<li><strong>接口描述</strong></li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/qry/query_pnt_cons_rec</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">三级鉴权</a></li>
<li><strong>业务规则</strong><br>  B1、如果接口传参没带分页参数，服务默认响应按每页10条，查询第1页处理。</li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>消费渠道</td>
<td>String</td>
<td>consume_channel</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>查询开始日期</td>
<td>Date</td>
<td>qry_start_date</td>
<td>否</td>
<td>格式：YYYY-MM-DD</td>
</tr>
<tr>
<td>查询结束日期</td>
<td>Date</td>
<td>qry_end_date</td>
<td>否</td>
<td>格式：YYYY-MM-DD</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_pnt_cons_rec&quot;:{
        &quot;user_id&quot;:&quot;&quot;,
        &quot;consume_channel&quot;:&quot;&quot;,
        &quot;qry_start_date&quot;:&quot;&quot;,
        &quot;qry_end_date&quot;:&quot;&quot;,
        &quot;paging_param&quot;:{
            &quot;page_size&quot;:&quot;&quot;,
            &quot;current_page&quot;:&quot;&quot;,
            &quot;record_total&quot;:&quot;&quot;
        }
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>沃币消费流水号</td>
<td>Int</td>
<td>consume_id</td>
<td>无</td>
</tr>
<tr>
<td>消费时间</td>
<td>Date</td>
<td>consume_time</td>
<td>格式：YYYY-MM-DD HH24:MM:SS</td>
</tr>
<tr>
<td>消费渠道</td>
<td>Int</td>
<td>consume_channel</td>
<td>无</td>
</tr>
<tr>
<td>礼品提供商</td>
<td>String</td>
<td>gift_provider</td>
<td>无</td>
</tr>
<tr>
<td>消费礼品名称</td>
<td>String</td>
<td>consume_gift</td>
<td>无</td>
</tr>
<tr>
<td>消费数量</td>
<td>Int</td>
<td>consume_num</td>
<td>礼品消费个数</td>
</tr>
<tr>
<td>消费总额</td>
<td>Int</td>
<td>consume_val</td>
<td>代表沃币总额</td>
</tr>
<tr>
<td>消费前沃币</td>
<td>Int</td>
<td>cons_bf_pnt</td>
<td>无</td>
</tr>
<tr>
<td>消费后沃币</td>
<td>Int</td>
<td>cons_af_pnt</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_pnt_cons_rec&quot;:{
        &quot;result_list&quot;:[
            {
                &quot;consume_id&quot;:&quot;&quot;,
                &quot;consume_time&quot;:&quot;&quot;,
                &quot;consume_channel&quot;:&quot;&quot;,
                &quot;gift_provider&quot;:&quot;&quot;,
                &quot;consume_gift&quot;:&quot;&quot;,
                &quot;consume_num&quot;:&quot;&quot;,
                &quot;consume_val&quot;:&quot;&quot;,
                &quot;cons_bf_pnt&quot;:&quot;&quot;,
                &quot;cons_af_pnt&quot;:&quot;&quot;
            }
        ],
        &quot;paging_param&quot;:{
            &quot;record_total&quot;:&quot;&quot;
        }
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-4-">2.5.4 沃币支付</h4>
<ul>
<li><strong>接口描述</strong></li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/dml/point_consume</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">一级鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端流水号</td>
<td>String</td>
<td>msg_id</td>
<td>是</td>
<td>32位UUID</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>MD5签名安全码</td>
<td>String(32)</td>
<td>secure_cd</td>
<td>是</td>
<td>client_id+client_secret+msg_id+s_body的json内容+access_token做MD5签名(不含+符号)</td>
</tr>
<tr>
<td>签名消息内容</td>
<td>Json</td>
<td>s_body</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>请求方消费流水号</td>
<td>String(100)</td>
<td>consumer_seq</td>
<td>是</td>
<td>保证请求方内部唯一</td>
</tr>
<tr>
<td>消费总沃币</td>
<td>Int</td>
<td>total_point</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>商品名称</td>
<td>String(50)</td>
<td>goods_name</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>商品数量</td>
<td>Int</td>
<td>goods_num</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;point_consume&quot;:{
        &quot;secure_cd&quot;:&quot; &quot;,
        &quot;s_body&quot;:{
            &quot;user_id&quot;:&quot;&quot;,
            &quot;consumer_seq&quot;:&quot;&quot;,
            &quot;total_point&quot;:&quot;&quot;,
            &quot;goods_name&quot;:&quot;&quot;,
            &quot;goods_num&quot;:&quot;&quot;
        }
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>应答方流水号</td>
<td>Int</td>
<td>consume_id</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;point_consume&quot;:{
        &quot;consume_id&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-5-">2.5.5 沃币奖励计算</h4>
<ul>
<li><strong>接口描述</strong></li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/dml/point_reward</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">一级鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端流水号</td>
<td>String</td>
<td>msg_id</td>
<td>是</td>
<td>32位UUID</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>MD5签名安全码</td>
<td>String(32)</td>
<td>secure_cd</td>
<td>是</td>
<td>client_id+client_secret+msg_id+s_body的json内容+access_token做MD5签名(不含+符号)</td>
</tr>
<tr>
<td>签名消息内容</td>
<td>Json</td>
<td>s_body</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>业务事件</td>
<td>String</td>
<td>biz_event</td>
<td>是</td>
<td>100101:消费金额奖励;110101:注册奖励;110102:连续登录奖励;110103:下载游戏奖励;110104:下载应用奖励;110105:分享奖励</td>
</tr>
<tr>
<td>传入流水号</td>
<td>String</td>
<td>req_order_nbr</td>
<td>否</td>
<td>外部事件唯一流水号</td>
</tr>
<tr>
<td>数据源</td>
<td>Json</td>
<td>data_src</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>
业务事件为110101,110102,110103,110105，示例如下：
{
    &quot;point_reward&quot;:{
        &quot;secure_cd&quot;:&quot; &quot;,
        &quot;s_body&quot;:{
            &quot;user_id&quot;:&quot;&quot;,
            &quot;biz_event&quot;:&quot;110101&quot;
        }
    }
}

业务事件为110104，示例如下：
{
    &quot;point_reward&quot;:{
        &quot;secure_cd&quot;:&quot; &quot;,
        &quot;s_body&quot;:{
            &quot;user_id&quot;:&quot;&quot;,
            &quot;biz_event&quot;:&quot;110104&quot;,
            &quot;req_order_nbr&quot;:&quot;&quot;,
            &quot;data_src&quot;:{
                &quot;download_app&quot;:{
                    &quot;unit_price&quot;:&quot;推广单价&quot;,
                    &quot;download_times&quot;:&quot;下载应用次数&quot;
                }
            }
        }
    }
}

业务事件为100101，示例如下：
{
    &quot;point_reward&quot;:{
        &quot;secure_cd&quot;:&quot; &quot;,
        &quot;s_body&quot;:{
            &quot;user_id&quot;:&quot;xxxx&quot;,
            &quot;biz_event&quot;:&quot;100101&quot;,
            &quot;req_order_nbr&quot;:&quot;&quot;,
            &quot;data_src&quot;:{
                &quot;consume_reward&quot;:{
                    &quot;serviceid&quot;:&quot;消费项标识&quot;,
                    &quot;servicename&quot;:&quot;消费项名称&quot;,
                    &quot;fee&quot;:&quot;消费金额&quot;,
                    &quot;msdn&quot;:&quot;手机号&quot;,
                    &quot;orderid&quot;:&quot;消费订单流水号&quot;,
                    &quot;ordertime&quot;:&quot;消费订单时间&quot;,
                    &quot;paytype&quot;:&quot;支付方式&quot;
                }
            }
        }
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>奖励所得沃币</td>
<td>Int</td>
<td>reward_point</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;point_reward&quot;:{
        &quot;reward_point&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-6-">2.5.6 统一支付消费沃币奖励</h4>
<ul>
<li><strong>接口描述</strong></li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/dml/pay_money_pnt_reward</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  XML</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;callPointsReq&gt;
    &lt;serviceid&gt;110&lt;/serviceid&gt;
    &lt;servicename&gt;消费&lt;/servicename&gt;
    &lt;msdn&gt;13823293047&lt;/msdn&gt;
    &lt;fee&gt;100&lt;/fee&gt;
    &lt;orderid&gt;1111111&lt;/orderid&gt;
    &lt;ordertime&gt;2014-03-24 19:36:01&lt;/ordertime&gt;
    &lt;paytype&gt;0&lt;/paytype&gt;
&lt;/callPointsReq&gt;</code></pre>
<ul>
<li><strong>返回参数</strong></li>
</ul>
<p>成功：</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;callPointsReq&gt;
    &lt;resultcode&gt;0&lt;/resultcode&gt;
&lt;/callPointsReq&gt;</code></pre>
<p>失败：<a href="#3-1-">错误编码</a>，返回结果为XML格式。</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;callPointsReq&gt;
    &lt;resultcode&gt;错误编码&lt;/resultcode&gt;
&lt;/callPointsReq&gt;</code></pre>
<h4 id="2-5-7-">2.5.7 沃币兑换</h4>
<ul>
<li><strong>接口描述</strong></li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/dml/redeem_voucher</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">一级鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端流水号</td>
<td>String</td>
<td>msg_id</td>
<td>是</td>
<td>32位UUID</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>MD5签名安全码</td>
<td>String(32)</td>
<td>secure_cd</td>
<td>是</td>
<td>client_id+client_secret+msg_id+s_body的json内容+access_token做MD5签名(不含+符号)</td>
</tr>
<tr>
<td>签名消息内容</td>
<td>Json</td>
<td>s_body</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>券类型编号</td>
<td>String(12)</td>
<td>voucher_type_id</td>
<td>是</td>
<td>预提供</td>
</tr>
<tr>
<td>活动编号</td>
<td>Int</td>
<td>action_id</td>
<td>是</td>
<td>预提供</td>
</tr>
<tr>
<td>消费订单流水</td>
<td>String</td>
<td>redeem_order_nbr</td>
<td>是</td>
<td>第三方订单号</td>
</tr>
<tr>
<td>消费订单时间</td>
<td>String</td>
<td>redeem_order_time</td>
<td>是</td>
<td>请求时间(YYYY-MM-DD HH24:MM:SS.FFF)</td>
</tr>
<tr>
<td>渠道来源</td>
<td>String</td>
<td>channel_name</td>
<td>是</td>
<td>例如是：沃商店，沃游戏，iphone</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;redeem_voucher&quot;:{
        &quot;secure_cd&quot;:&quot; &quot;,
        &quot;s_body&quot;:{
            &quot;voucher_type_id&quot;:&quot;&quot;,
            &quot;action_id&quot;:&quot;&quot;,
            &quot;redeem_order_nbr&quot;:&quot;&quot;,
            &quot;redeem_order_time&quot;:&quot;&quot;,
            &quot;channel_name&quot;:&quot;&quot;
        }
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>应答方兑换流水号</td>
<td>Int</td>
<td>redeem_id</td>
<td>无</td>
</tr>
<tr>
<td>券号</td>
<td>String</td>
<td>key</td>
<td>无</td>
</tr>
<tr>
<td>券密码</td>
<td>String</td>
<td>pwd</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;redeem_voucher&quot;:{
        &quot;redeem_id&quot;:&quot;&quot;,
        &quot;voucher_list&quot;:[
            {
                &quot;key&quot;: &quot;&quot;,
                &quot;pwd&quot;: &quot;&quot;
            }
        ]
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-8-">2.5.8 请求沃币充值订单</h4>
<ul>
<li><strong>接口描述</strong></li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/dml/register_recharge_order</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">一级鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端流水号</td>
<td>String</td>
<td>msg_id</td>
<td>是</td>
<td>32位UUID</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>MD5签名安全码</td>
<td>String(32)</td>
<td>secure_cd</td>
<td>是</td>
<td>client_id+client_secret+msg_id+s_body的json内容+access_token做MD5签名(不含+符号)</td>
</tr>
<tr>
<td>签名消息内容</td>
<td>Json</td>
<td>s_body</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>计费点ID</td>
<td>String(40)</td>
<td>cons_item_id</td>
<td>是</td>
<td>计费点id</td>
</tr>
<tr>
<td>手机imei</td>
<td>String</td>
<td>imei</td>
<td>是</td>
<td>手机imei</td>
</tr>
<tr>
<td>账户SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>是</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;register_recharge_order&quot;:{
        &quot;secure_cd&quot;:&quot; &quot;,
        &quot;s_body&quot;:{
            &quot;cons_item_id&quot;:&quot;&quot;,
            &quot;imei&quot;:&quot;&quot;,
            &quot;sdk_version&quot;:&quot;&quot;
        }
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>应答方订单号</td>
<td>String</td>
<td>order_id</td>
<td>无</td>
</tr>
<tr>
<td>应答方订单时间</td>
<td>String</td>
<td>order_time</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;register_recharge_order&quot;:{
        &quot;order_id&quot;:&quot;&quot;,
        &quot;order_time&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-9-">2.5.9 沃币充值计费点查询</h4>
<ul>
<li><strong>接口描述</strong><br>  查询充值计费点</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/qry/query_cons_items</li>
<li><strong>请求方式</strong><br>  GET</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">三级鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>应用名称</td>
<td>String</td>
<td>app_name</td>
<td>无</td>
</tr>
<tr>
<td>开发者名称</td>
<td>String</td>
<td>developer_name</td>
<td>无</td>
</tr>
<tr>
<td>客服电话</td>
<td>String</td>
<td>service_tel</td>
<td>无</td>
</tr>
<tr>
<td>计费点ID</td>
<td>String(40)</td>
<td>cons_item_id</td>
<td>无</td>
</tr>
<tr>
<td>话费计费点ID</td>
<td>String</td>
<td>cons_phone_id</td>
<td>无</td>
</tr>
<tr>
<td>计费点名称</td>
<td>String(12)</td>
<td>cons_item_name</td>
<td>无</td>
</tr>
<tr>
<td>计费价格</td>
<td>Int</td>
<td>pay_fee</td>
<td>单位分</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_cons_items&quot;:{
       &quot;app_name&quot;:&quot;&quot;,
       &quot;developer_name&quot;:&quot;&quot;,
       &quot;service_tel&quot;:&quot;&quot;,
           &quot;items&quot;:[
              {
                 &quot;cons_item_id&quot;:&quot;&quot;,
                 &quot;cons_phone_id&quot;:&quot;&quot;,
                 &quot;cons_item_name&quot;:&quot;&quot;,
                 &quot;pay_fee&quot;:&quot;&quot;
             },
             ...
           ]
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-10-">2.5.10 沃币充值订单查询</h4>
<ul>
<li><strong>接口描述</strong><br>  沃币充值订单查询</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/qry/query_recharge_orders</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">三级鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>签名消息内容</td>
<td>String</td>
<td>s_body</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>沃币充值订单号</td>
<td>String</td>
<td>order_id</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>查询起始时间</td>
<td>String</td>
<td>qry_start_date</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>查询结束日期</td>
<td>String</td>
<td>qry_end_date</td>
<td>否</td>
<td>无</td>
</tr>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>否</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_recharge_orders&quot;:{
        &quot;s_body&quot;:{
            &quot;order_id&quot;:&quot;&quot;,
            &quot;qry_start_date&quot;:&quot;&quot;,
            &quot;qry_end_date&quot;:&quot;&quot;,
            &quot;client_id&quot;:&quot;&quot;
            &quot;paging_param&quot;:{
                &quot;page_size&quot;:&quot;&quot;,
                &quot;current_page&quot;:&quot;&quot;,
                &quot;record_total&quot;:&quot;&quot;
            }
        }
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>计费点名称</td>
<td>String(12)</td>
<td>cons_item_name</td>
<td>无</td>
</tr>
<tr>
<td>计费金额</td>
<td>Int</td>
<td>pay_fee</td>
<td>单位分</td>
</tr>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>无</td>
</tr>
<tr>
<td>支付类型</td>
<td>String</td>
<td>pay_type</td>
<td>-1：未接受到支付结果，订单默认状态；0：沃支付；1：支付宝；2：VAC支付；3：神州付；只有接收到</td>
</tr>
<tr>
<td>下单时间</td>
<td>String</td>
<td>order_time</td>
<td>14位时间字符串</td>
</tr>
<tr>
<td>状态</td>
<td>String</td>
<td>state</td>
<td>1001：新建，未支付；1011：通过验证，支付中；1111：支付成功；1211：支付失败</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_recharge_orders&quot;:{
        &quot;orders&quot;:[
            {
             &quot;order_id&quot;:&quot;&quot;,
             &quot;cons_item_name&quot;:&quot;&quot;,
             &quot;pay_fee&quot;:&quot;&quot;,
             &quot;client_id&quot;:&quot;&quot;,
             &quot;order_time&quot;:&quot;&quot;
             &quot;pay_type&quot;:&quot;&quot;
             &quot;state&quot;:&quot;&quot;
            },
         ...
        ]
        &quot;paging_param&quot;:{
            &quot;record_total&quot;:&quot;&quot;
        }
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-11-">2.5.11 沃币查询接口(手机号码)</h4>
<ul>
<li><strong>接口描述</strong><br>  仅用手机号码即可查询该手机号对应的账户的沃币余额，供Server端调用。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/qry/query_point_mobile</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>手机号码</td>
<td>String</td>
<td>mobile_phone</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_point&quot;:{
        &quot;mobile_phone&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>沃币余额</td>
<td>Int</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>年底即将到期沃币</td>
<td>Int</td>
<td>pnt_end_of_year</td>
<td>无</td>
</tr>
<tr>
<td>当月产生沃币</td>
<td>Int</td>
<td>cur_month_pnt</td>
<td>无</td>
</tr>
<tr>
<td>累计产生总沃币</td>
<td>Int</td>
<td>point_value</td>
<td>有效期内累计产生总沃币</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_point&quot;:{
        &quot;point&quot;:&quot;&quot;,
        &quot;pnt_end_of_year&quot;:&quot;&quot;,
        &quot;cur_month_pnt&quot;:&quot;&quot;,
        &quot;point_value&quot;:&quot;&quot;
  }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-12-">2.5.12 沃币扣减接口(手机号码)</h4>
<ul>
<li><strong>接口描述</strong><br>  仅用手机号码即可进行沃币支付，供Server端调用。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/dml/point_consume_mobile</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>签名</td>
<td>String</td>
<td>sign</td>
<td>是</td>
<td>client_id+mobile_phone+order_id+source+timestamp+total_point+good_name+good_count做MD5签名(不含+符号)</td>
</tr>
<tr>
<td>手机号码</td>
<td>String</td>
<td>mobile_phone</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>商品名称</td>
<td>String(50)</td>
<td>good_name</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>商品数量</td>
<td>Int</td>
<td>good_count</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>请求方消费流水号</td>
<td>String(100)</td>
<td>order_id</td>
<td>是</td>
<td>保证请求方内部唯一</td>
</tr>
<tr>
<td>来源</td>
<td>String</td>
<td>source</td>
<td>是</td>
<td>1:用户已绑定手机号码；2：用户没有绑定手机号码。是否绑定手机号码是对于请求方而言的。</td>
</tr>
<tr>
<td>验证码</td>
<td>String</td>
<td>sms_code</td>
<td>否</td>
<td>source=2时，必填</td>
</tr>
<tr>
<td>时间戳</td>
<td>String</td>
<td>timestamp</td>
<td>是</td>
<td>格式：YYYYMMDDHHMMSS</td>
</tr>
<tr>
<td>消费总沃币</td>
<td>Int</td>
<td>total_point</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;point_consume&quot;:{
        &quot;sign&quot;:&quot; &quot;,
        &quot;mobile_phone&quot;:&quot;&quot;,
        &quot;good_count&quot;:&quot;&quot;,
        &quot;good_name&quot;:&quot;&quot;,
        &quot;order_id&quot;:&quot;&quot;,
        &quot;source&quot;:&quot;&quot;,
        &quot;sms_code&quot;:&quot;&quot;,
        &quot;timestamp&quot;:&quot;&quot;,
        &quot;total_point&quot;:&quot;&quot; 
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>应答方流水号</td>
<td>Int</td>
<td>consume_id</td>
<td>此次操作在账户系统的流水号</td>
</tr>
<tr>
<td>沃币余额</td>
<td>int</td>
<td>point</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;point_consume&quot;:{
        &quot;consume_id&quot;:&quot;&quot;,
        &quot;point&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-13-">2.5.13 沃币回滚接口(手机号码)</h4>
<ul>
<li><strong>接口描述</strong><br>  仅用手机号码即可返还之前消费的沃币，供Server端调用。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/dml/point_consume_buyback</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>签名</td>
<td>String</td>
<td>sign</td>
<td>是</td>
<td>client_id+mobile_phone+order_id+timestamp+good_count做MD5签名(不含+符号)</td>
</tr>
<tr>
<td>手机号码</td>
<td>String</td>
<td>mobile_phone</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>回滚商品数量</td>
<td>Int</td>
<td>good_count</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>应答方流水号</td>
<td>String(100)</td>
<td>order_id</td>
<td>是</td>
<td>对应的沃币扣减操作在账户系统的流水号</td>
</tr>
<tr>
<td>时间戳</td>
<td>String</td>
<td>timestamp</td>
<td>是</td>
<td>格式：YYYYMMDDHHMMSS</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;point_consume&quot;:{
        &quot;sign&quot;:&quot; &quot;,
        &quot;mobile_phone&quot;:&quot;&quot;,
        &quot;good_count&quot;:&quot;&quot;,
        &quot;order_id&quot;:&quot;&quot;,
        &quot;timestamp&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>沃币余额</td>
<td>Int</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>年底即将到期沃币</td>
<td>Int</td>
<td>pnt_end_of_year</td>
<td>无</td>
</tr>
<tr>
<td>当月产生沃币</td>
<td>Int</td>
<td>cur_month_pnt</td>
<td>无</td>
</tr>
<tr>
<td>累计产生总沃币</td>
<td>Int</td>
<td>point_value</td>
<td>有效期内累计产生总沃币</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_point&quot;:{
        &quot;point&quot;:&quot;&quot;,
        &quot;pnt_end_of_year&quot;:&quot;&quot;,
        &quot;cur_month_pnt&quot;:&quot;&quot;,
        &quot;point_value&quot;:&quot;&quot;
  }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-14-">2.5.14 沃币消费检查</h4>
<ul>
<li><strong>接口描述</strong><br>  沃币消费前做相关校验</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt-api/pnt_api/dml/point_consume_verify</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">三级鉴权</a></li>
<li><p><strong>业务规则</strong></p>
</li>
<li><p><strong>请求参数</strong></p>
</li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>访问令牌</td>
<td>String</td>
<td>access_token</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<p>body必须存在，但是内容可为空。</p>
<pre><code>{
    &quot;point_consume_verify&quot;:{}
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>沃币余额</td>
<td>Int</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>状态码</td>
<td>String</td>
<td>result</td>
<td>1: 多设备登录，2：不在场用地区，4：未设置密码，8：未绑定手机号码，200：正常；可以是多个状态码或操作之后的结果。</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;point_consume_verify&quot;:{
        &quot;point&quot;:&quot;&quot;,
        &quot;result&quot;:&quot;&quot;
  }
}</code></pre>
<p>失败：<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-15-">2.5.15 查询广告接口</h4>
<ul>
<li><strong>接口描述</strong><br>  使用用户输入的手机号+密码进行登录。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt_api/qry/query_ad</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><p><strong>业务规则</strong><br>  B1、每天或者每周第一次加载sdk时加载此接口，缓存结果。</p>
<p>  B2、在登录完成后，按照缓存结果显示广告。</p>
</li>
<li><p><strong>请求参数</strong></p>
</li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>SDK版本号</td>
<td>String</td>
<td>sdk_version</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>应用id</td>
<td>String</td>
<td>app_id</td>
<td>是</td>
<td>应用id</td>
</tr>
</tbody>
</table>
<pre><code>{
    query_ad: {
        &quot;app_id&quot;: &quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>是否显示广告</td>
<td>String</td>
<td>showing</td>
<td>表示是否显示广告</td>
</tr>
<tr>
<td>广告标题</td>
<td>String</td>
<td>title</td>
<td>无</td>
</tr>
<tr>
<td>广告内容地址</td>
<td>String</td>
<td>url</td>
<td>无</td>
</tr>
<tr>
<td>按钮名称</td>
<td>String</td>
<td>action</td>
</tr>
<tr>
<td>广告类型</td>
<td>String</td>
<td>type</td>
<td>PNT_RECHARGE 积分充值推广</td>
</tr>
<tr>
<td>广告加载间隔</td>
<td>int</td>
<td>interval</td>
<td>单位小时</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_ad&quot;:{
    &quot;showing&quot;:true,
    &quot;title&quot;:&quot;&quot;,
    &quot;url&quot;:&quot;&quot;,
    &quot;action&quot;:&quot;&quot;,
    &quot;type&quot;:&quot;&quot;,
    &quot;interval&quot;: 24 
    }
}</code></pre>
<p>失败:<br><a href="#3-1-">错误编码</a></p>
<h4 id="2-5-16-">2.5.16 神州付余额充值沃币</h4>
<ul>
<li><strong>接口描述</strong><br>  使用用户输入的手机号+密码进行登录。</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试|生产环境</a>/pnt_api/dml/recharge_point_shen_zhou</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><p><strong>业务规则</strong><br>  B1、支付在完成神州付后通过用户是否绑定手机，绝对是否将神州付余额充值到沃币。</p>
<p>  B2、调用此接口完成充值沃币。</p>
</li>
<li><p><strong>请求参数</strong></p>
</li>
</ul>
<p>Header:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户id</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>用户id</td>
</tr>
<tr>
<td>充值沃币数</td>
<td>Int</td>
<td>point_count</td>
<td>是</td>
<td>充值沃币数，单位分</td>
</tr>
<tr>
<td>消费标识</td>
<td>String</td>
<td>service_id</td>
<td>是</td>
<td>消费标识</td>
</tr>
</tbody>
</table>
<pre><code>{
    recharge_point_shen_zhou: {
        &quot;user_id&quot;: &quot;&quot;，
        &quot;point_count&quot;: &quot;&quot;，
        &quot;data_src&quot;: {
            &quot;service_id&quot;: &quot;&quot;
        }
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功:</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>充值沃币数</td>
<td>Int</td>
<td>point_count</td>
<td>是</td>
<td>充值沃币数，单位分</td>
</tr>
<tr>
<td>积分系统的消费标识</td>
<td>String</td>
<td>service_id</td>
<td>是</td>
<td>积分系统的消费标识</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;recharge_point_shen_zhou&quot;:{
        &quot;point_count&quot;: &quot;&quot;，
        &quot;service_id&quot;: &quot;&quot;
    }
}</code></pre>
<p>失败:<br><a href="#3-1-">错误编码</a></p>
<h3 id="2-6-">2.6 报表文件说明及格式</h3>
<h4 id="2-6-1-">2.6.1 接口文件设计原则</h4>
<p>在满足要求的前提下，为了使应用接口尽量简单、明了，并便于实现，系统统一文件采用ASCII码格式。</p>
<p>为了保证接口数据的一致性，避免各类数据类型和格式错误，在形成所传输的ASCII格式文件之前，将数据转成本接口规范所规定的数据类型和格式。</p>
<p>接口文件均按规范要求的数据内容、数据类型长度及顺序采用定长方式记录数据，每行数据以回车换行符0x0D0A结束（抽取的数据内容中不能包含此符号）。如果数据的实际字节长度小于规范中要求的字段长度，则必须用空格补齐（右补齐），如果数据的实际长度大于规范中的要求，则需要截断（如字符描述）。</p>
<p>接口数据文件均按此描述及顺序，以定长方式记录数据，并以0x0D0A(回车换行符)为每行的结束标志，因此，数据内容中不能包含此符号。</p>
<h4 id="2-6-2-">2.6.2 接口数据的抽取周期</h4>
<p>定期抽取是指根据不同的数据内容，按照数据抽取周期，在指定的时间内对数据进行抽取的方式。定期抽取分为新增、增量或全量抽取。</p>
<p>对于某些接口单元的数据，抽取周期既有日增量或者日新增数据抽取又有月全量抽取时，其抽取月全量数据的当日，同时需要抽取此日增量或者日新增数据。</p>
<h4 id="2-6-3-">2.6.3 接口文件格式</h4>
<ul>
<li>文件命名规则</li>
</ul>
<table>
<thead>
<tr>
<th>文件类型</th>
<th>文件名格式</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>接口数据文件</td>
<td>日期/USER<em>DEALING_REC_DAILY.txt;日期/USER_DEALING_REC_HOUR</em>时间点数.txt</td>
<td>无</td>
</tr>
</tbody>
</table>
<ul>
<li><p>文件后缀格式<br>  文件类型：txt文本文件；<br>  数据分隔符：文件中的数据以“|”分割；</p>
</li>
<li><p>其它说明</p>
<p>  日期是描述当前抽取周期中，数据的发生日期（如：20120306，则表示抽取的是2012年3月6日的数据快照）。<br>  按日抽取的数据文件，其日期就是数据的发生日期；<br>  按月抽取的数据文件，则日期取数据发生的年月（对日期有特殊要求的接口单元，将在其“数据要求”中详细描述）。<br>  例子：<br>  20120306/USER_DEALING_REC_DAILY.txt<br>  20120306/USER_DEALING_REC_HOUR_1.txt<br>  20120306/USER_DEALING_REC_HOUR_2.txt<br>  20120306/USER_DEALING_REC_HOUR_3.txt<br>  ......<br>  20120306/USER_DEALING_REC_HOUR_24.txt</p>
</li>
</ul>
<h4 id="2-6-4-">2.6.4 接口文件内容</h4>
<p>每小时接口文件样例：<br>列内容解释：<br>手机注册|一键注册|验证码登陆|手机登陆|自动登陆|订购鉴权数<br>12131|231241|123123|1231|1312|2343</p>
<p>每日接口文件样例：<br>列内容解释：<br>昨日新注册用户总数|昨日登陆用户数据总数|昨日订购鉴权总数|新应用接入的总数|共计接入的应用总数|账户的总用户数<br>3224|234|234|234|23423|345</p>
<h4 id="2-6-5-">2.6.5 文件路径（暂定）</h4>
<p>路径：/home/report/sendreport<br>IP:10:96.195.189<br>用户：report<br>密码：Reprot00189*</p>
<h3 id="2-7-">2.7 积分</h3>
<h4 id="2-7-1-">2.7.1 积分添加</h4>
<ul>
<li><strong>接口描述</strong><br>  仅供Server端调用</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试/生产环境</a>/pnt-api/pnt_api/dml/add_pnt</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>MD5签名安全码</td>
<td>String(32)</td>
<td>secure_cd</td>
<td>是</td>
<td>client_id+client_secret+s_body的json内容做MD5签名(不含+符号)</td>
</tr>
<tr>
<td>签名消息内容</td>
<td>Json</td>
<td>s_body</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>添加的积分值</td>
<td>int</td>
<td>point</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>事件类型</td>
<td>String</td>
<td>biz_event</td>
<td>是</td>
<td>取值：200100</td>
</tr>
<tr>
<td>添加积分的原因</td>
<td>String</td>
<td>reason</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;add_pnt&quot;: {
        &quot;secure_cd&quot;:&quot;&quot;,
        &quot;s_body&quot;: {
            &quot;user_id&quot;:&quot;&quot;,
            &quot;point&quot;:&quot;&quot;,
            &quot;biz_event&quot;:&quot;&quot;,
            &quot;reason&quot;:&quot;&quot;
        }
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>积分余额</td>
<td>int</td>
<td>point</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;add_pnt&quot;： {
        &quot;point&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败：<a href="#3-1-">错误编码</a></p>
<h4 id="2-7-2-">2.7.2 积分扣减</h4>
<ul>
<li><strong>接口描述</strong><br>  仅供Server端调用</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试/生产环境</a>/pnt-api/pnt_api/dml/consume_pnt</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>MD5签名安全码</td>
<td>String(32)</td>
<td>secure_cd</td>
<td>是</td>
<td>client_id+client_secret+s_body的json内容做MD5签名(不含+符号)</td>
</tr>
<tr>
<td>签名消息内容</td>
<td>Json</td>
<td>s_body</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>请求方消费流水号</td>
<td>String(100)</td>
<td>consumer_seq</td>
<td>是</td>
<td>保证请求方内部唯一</td>
</tr>
<tr>
<td>消费总积分</td>
<td>Int</td>
<td>total_point</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>商品名称</td>
<td>String(50)</td>
<td>goods_name</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>商品数量</td>
<td>Int</td>
<td>goods_num</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;consume_pnt&quot;: {
        &quot;secure_cd&quot;:&quot;&quot;,
        &quot;s_body&quot;: {
            &quot;user_id&quot;:&quot;&quot;,
            &quot;consumer_seq&quot;:&quot;&quot;,
            &quot;total_point&quot;:,
            &quot;goods_name&quot;:&quot;&quot;,
            &quot;goods_num&quot;:
        }
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>积分余额</td>
<td>int</td>
<td>point</td>
<td>无</td>
</tr>
<tr>
<td>应答方流水号</td>
<td>int</td>
<td>consume_id</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;consume_pnt&quot;： {
        &quot;point&quot;:&quot;&quot;,
        &quot;consume_id&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败：<a href="#3-1-">错误编码</a></p>
<h4 id="2-7-3-">2.7.3. 积分回滚</h4>
<ul>
<li><strong>接口描述</strong><br>  仅供Server端调用</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试/生产环境</a>/pnt-api/pnt_api/dml/buyback_pnt</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>MD5签名安全码</td>
<td>String(32)</td>
<td>secure_cd</td>
<td>是</td>
<td>client_id+client_secret+s_body的json内容做MD5签名(不含+符号)</td>
</tr>
<tr>
<td>签名消息内容</td>
<td>Json</td>
<td>s_body</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>应答方流水号</td>
<td>String</td>
<td>order_id</td>
<td>是</td>
<td>对应的积分扣减操作在账户系统的流水号</td>
</tr>
<tr>
<td>回滚商品数量</td>
<td>int</td>
<td>goods_num</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;buyback_pnt&quot;: {
        &quot;secure_cd&quot;:&quot;&quot;,
        &quot;s_body&quot;: {
            &quot;user_id&quot;:&quot;&quot;,
            &quot;order_id&quot;:&quot;&quot;,
            &quot;goods_num&quot;:
        }
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>积分余额</td>
<td>int</td>
<td>point</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;buyback_pnt&quot;： {
        &quot;point&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败：<a href="#3-1-">错误编码</a></p>
<h4 id="2-7-4-">2.7.4. 积分查询</h4>
<ul>
<li><strong>接口描述</strong><br>  仅供Server端调用</li>
<li><strong>接口地址</strong><br>  <a href="#1-2-">测试/生产环境</a>/pnt-api/pnt_api/qry/query_pnt</li>
<li><strong>请求方式</strong><br>  POST</li>
<li><strong>参数格式</strong><br>  JSON</li>
<li><strong>鉴权要求</strong><br>  <a href="#3-2-">应用鉴权</a></li>
<li><strong>业务规则</strong></li>
<li><strong>请求参数</strong></li>
</ul>
<p>Header：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>客户端ID</td>
<td>String</td>
<td>client_id</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>客户端密钥</td>
<td>String</td>
<td>client_secret</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<p>Body：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>必须</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户ID</td>
<td>String</td>
<td>user_id</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_pnt&quot;: {
        &quot;user_id&quot;:&quot;&quot;
    }
}</code></pre>
<ul>
<li><strong>返回结果</strong></li>
</ul>
<p>成功：</p>
<table>
<thead>
<tr>
<th>元素名称</th>
<th>类型（长度）</th>
<th>标签元素</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>积分余额</td>
<td>int</td>
<td>point</td>
<td>无</td>
</tr>
</tbody>
</table>
<pre><code>{
    &quot;query_pnt&quot;： {
        &quot;point&quot;:&quot;&quot;
    }
}</code></pre>
<p>失败：<a href="#3-1-">错误编码</a></p>
<h2 id="3-">3 其他</h2>
<h3 id="3-1-">3.1 错误编码列表</h3>
<table>
<thead>
<tr>
<th>错误编码</th>
<th>错误描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1001</td>
<td>参数非法(类型不一致)</td>
</tr>
<tr>
<td>1002</td>
<td>参数page_size必须在1到50的范围</td>
</tr>
<tr>
<td>1101</td>
<td>用户不存在</td>
</tr>
<tr>
<td>1102</td>
<td>帐号或密码错误</td>
</tr>
<tr>
<td>1103</td>
<td>该手机号码已被注册</td>
</tr>
<tr>
<td>1104</td>
<td>该手机号码尚未被注册</td>
</tr>
<tr>
<td>1105</td>
<td>非有效的验证码请求</td>
</tr>
<tr>
<td>1106</td>
<td>密码不符合要求</td>
</tr>
<tr>
<td>1107</td>
<td>email地址不符合要求</td>
</tr>
<tr>
<td>1108</td>
<td>密保回答不符合要求</td>
</tr>
<tr>
<td>1109</td>
<td>未经用户授权</td>
</tr>
<tr>
<td>1110</td>
<td>用户鉴权失败</td>
</tr>
<tr>
<td>1111</td>
<td>code已被使用</td>
</tr>
<tr>
<td>1112</td>
<td>code非法</td>
</tr>
<tr>
<td>1113</td>
<td>用户尚未绑定手机</td>
</tr>
<tr>
<td>1114</td>
<td>登录鉴权级别不满足接口鉴权要求</td>
</tr>
<tr>
<td>1115</td>
<td>该邮箱已被绑定</td>
</tr>
<tr>
<td>1116</td>
<td>该号码已加为好友</td>
</tr>
<tr>
<td>1117</td>
<td>不能加自己为好友</td>
</tr>
<tr>
<td>1118</td>
<td>好友不存在</td>
</tr>
<tr>
<td>1119</td>
<td>该业务不允许跨月查询</td>
</tr>
<tr>
<td>1120</td>
<td>该业务只可查询最近六个月记录</td>
</tr>
<tr>
<td>1121</td>
<td>该业务不允许查询大于当月记录</td>
</tr>
<tr>
<td>1122</td>
<td>暂不支持异网手机号码</td>
</tr>
<tr>
<td>1123</td>
<td>该会员已绑定手机号码</td>
</tr>
<tr>
<td>1124</td>
<td>达到最大登录失败次数锁定账户</td>
</tr>
<tr>
<td>1200</td>
<td>无法获取手机号码</td>
</tr>
<tr>
<td>1201</td>
<td>需要修改密码</td>
</tr>
<tr>
<td>2001</td>
<td>用户沃币不足</td>
</tr>
<tr>
<td>2002</td>
<td>消费订单号重复提交</td>
</tr>
<tr>
<td>2003</td>
<td>安全码不合法</td>
</tr>
<tr>
<td>2004</td>
<td>SIM状态异常</td>
</tr>
<tr>
<td>2005</td>
<td>返销失败</td>
</tr>
<tr>
<td>2006</td>
<td>返销数量非法</td>
</tr>
<tr>
<td>2007</td>
<td>订单不存在</td>
</tr>
<tr>
<td>3001</td>
<td>活动不存在</td>
</tr>
<tr>
<td>3002</td>
<td>用户无法参加此次活动</td>
</tr>
<tr>
<td>3003</td>
<td>库存不足</td>
</tr>
<tr>
<td>3004</td>
<td>已兑换</td>
</tr>
<tr>
<td>1996</td>
<td>非有效的接口服务编码请求</td>
</tr>
<tr>
<td>1997</td>
<td>应用的接口访问权限受限</td>
</tr>
<tr>
<td>1998</td>
<td>请求参数错误(必填项参数必传)</td>
</tr>
<tr>
<td>1999</td>
<td>系统错误</td>
</tr>
</tbody>
</table>
<h3 id="3-2-">3.2 鉴权要求列表</h3>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>应用鉴权</td>
<td>指需要客户端ID+客户端密钥进行鉴权,具体参照请求HTTP头</td>
</tr>
<tr>
<td>用户鉴权一级</td>
<td>包含应用鉴权，用户鉴权特指帐户+密码登录方式鉴权</td>
</tr>
<tr>
<td>用户鉴权二级</td>
<td>包含应用鉴权，用户鉴权指帐户+密码 或 手机+短信码登录方式鉴权</td>
</tr>
<tr>
<td>用户鉴权三级</td>
<td>包含应用鉴权，用户鉴权指帐户+密码 或 手机+短信码 或 自动登录注册的登录方式鉴权</td>
</tr>
</tbody>
</table>
<h3 id="3-3-">3.3 密码加密</h3>
<p>2.0.0及其之前版本密码在传输过程中采用3DES做对称加密，2.0.1及其之后版本密码在传输过程中采用MD5加密（非标准MD5加密）。</p>
<p>具体加密算法或密钥请联系相关人员获取。</p>

</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
